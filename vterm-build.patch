--- CMakeLists.txt.orig	2025-11-24 16:54:55
+++ CMakeLists.txt	2025-11-24 16:55:52
@@ -1,6 +1,10 @@
 cmake_minimum_required(VERSION 3.11)
 include(ExternalProject)
 
+# Force arm64 architecture on macOS
+set(CMAKE_OSX_ARCHITECTURES "arm64" CACHE STRING "Build architectures for macOS" FORCE)
+set(CMAKE_C_FLAGS "${CMAKE_C_FLAGS} -arch arm64")
+
 project(emacs-libvterm C)
 
 if(CMAKE_SYSTEM_NAME STREQUAL "FreeBSD" OR CMAKE_SYSTEM_NAME STREQUAL "OpenBSD" OR CMAKE_SYSTEM_NAME STREQUAL "NetBSD")
@@ -16,6 +20,7 @@
   POSITION_INDEPENDENT_CODE ON
   PREFIX ""
   LIBRARY_OUTPUT_DIRECTORY ${CMAKE_SOURCE_DIR}
+  OSX_ARCHITECTURES "arm64"
   )
 
 # Set RelWithDebInfo as default build type
@@ -75,7 +80,7 @@
     GIT_REPOSITORY https://github.com/Sbozzolo/libvterm-mirror.git
     GIT_TAG 64f1775952dbe001e989f2ab679563b54f2fca55
     CONFIGURE_COMMAND ""
-    BUILD_COMMAND ${LIBVTERM_BUILD_COMMAND} "CFLAGS='-fPIC'" "LDFLAGS='-static'"
+    BUILD_COMMAND ${LIBVTERM_BUILD_COMMAND} CFLAGS=-fPIC\ -arch\ arm64 LDFLAGS=-static\ -arch\ arm64
     BUILD_IN_SOURCE ON
     INSTALL_COMMAND "")
 
